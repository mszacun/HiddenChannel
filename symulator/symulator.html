<html>
    <head>
        <script src="lib/jquery.js"></script>
        <script src="lib/lodash.js"></script>
        <script src="lib/backbone.js"></script>
        <script src="lib/datatables/datatables.min.js"></script>
        <script src="lib/metro/metro.min.js"></script>
        <script src="models.js"></script>
        <script src="symulator.js"></script>

        <script>
            var symulator = new Symulator({symulationTime: 15});
            for (var i = 0; i < 15; i++) {
                if (i == 13)
                    debugger;
                console.log(symulator.step());
            }

            $(document).ready(function() {
                _.each(symulator.allBasicMessages, function(message) {
                    var $messageRow = $('<tr>')
                        .append($('<td>').text(message.get('id')))
                        .append($('<td>').text(message.apperanceTime))
                        .append($('<td>').text(message.receiveTime))
                        .append($('<td>').text(message.delay));

                    $messageRow.appendTo('#basic-messages-table tbody');
                });

                _.each(symulator.allHiddenMessages, function(message) {
                    var $messageRow = $('<tr>')
                        .append($('<td>').text(message.get('id')))
                        .append($('<td>').text(message.apperanceTime))
                        .append($('<td>').text(message.receiveTime))
                        .append($('<td>').text(message.delay));

                    $messageRow.appendTo('#hidden-messages-table tbody');
                });

                $('#basic-messages-table').DataTable({
                    paging: false,
                    info: false,
                    searching: false
                });

                $('#hidden-messages-table').DataTable({
                    paging: false,
                    searching: false,
                    info: false
                });
            });
        </script>

        <link rel="stylesheet" type="text/css" href="lib/datatbles/datatables.min.css"/>
        <link rel="stylesheet" type="text/css" href="lib/metro/metro-icons.min.css"/>
        <link rel="stylesheet" type="text/css" href="lib/metro/metro.min.css"/>

    </head>
    <body>
        <div class='container'>
            <div class='grid'>
                <div class='row cells5'>
                    <div class='cell colspan5'>
                        <table id='basic-messages-table' class='stripped'>
                            <thead>
                                <th>Id wiadomosci</th>
                                <th>Czas naplywu</th>
                                <th>Czas odbioru</th>
                                <th>Opoznienie</th>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>

                        <table id='hidden-messages-table' class='stripped'>
                            <thead>
                                <th>Id wiadomosci</th>
                                <th>Czas naplywu</th>
                                <th>Czas odbioru</th>
                                <th>Opoznienie</th>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
